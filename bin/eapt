#!/usr/bin/env bash
set -u

function __echo_helptext() {
  cat "${DOTFILES}/share/help/eapt.txt"
  apt help "$@"
}

if [[ "$#" -eq 0 ]]; then
  __echo_helptext
  exit 0
fi

declare -r cmd="$1"

if [[ "$cmd" = "upgrade" ]]; then
  sudo apt update && sudo apt -y upgrade
elif [[ "$cmd" = "full-upgrade" ]]; then
  if (sudo apt update); then
    sudo apt -y full-upgrade
    sudo apt -y autoremove
    sudo apt -y autoclean
  fi
elif [[ "$cmd" = "install" ]]; then
  shift 1
  sudo apt update && sudo apt -y upgrade && sudo apt -y install "$@"
elif [[ "$cmd" = "help" ]]; then
  shift 1
  __echo_helptext "$@"
else
  sudo apt "$@"
fi

exit 0

# EOF
